# 機能仕様: 要求1 - 迅速な記録開始

(省略)

---

# 機能仕様: 要求2 - 簡単な種目追加 (修正版)

(省略)

---

# 機能仕様: 要求3 - 完了した記録の永続化

(省略)

---

# 機能仕様: 要求5 - トレーニング履歴の確認

(省略)

---

# 機能仕様: 要求6 - セット入力UI/UXの改善

(省略)

---

# 機能仕様: 要求7 - 記録済みセットの編集機能 (修正版)

(省略)

---

# 機能仕様: 要求8 - iOS仮想キーボードとフローティングボタンの共存

## 1. 課題分析
- **ユーザーの目的**: iOSでキーボードを表示した際に、フローティングの「+」ボタンがキーボードに隠れないようにしたい。
- **提案されたCSSの分析**: ユーザーから提案された`env(keyboard-inset-height)`は、仮想キーボードの高さを取得するためのCSS環境変数です。しかし、この変数は2024年初頭現在、**iOSのSafariではサポートされていません**。そのため、このCSSを適用しても期待した動作にはなりません。
- **代替案の検討**: JavaScriptの`visualViewport` APIを利用して動的に位置を計算する方法もありますが、実装が複雑になり、OSやブラウザのバージョンによって挙動が不安定になる可能性があります。

## 2. 解決策の提案 (UI/UXの変更)
技術的な制約や不安定さを回避するため、より堅牢でシンプルな解決策として、**ボタンの配置を変更する**ことを提案します。

- **変更内容**: フローティングアクションボタン（FAB）を、画面右下から**画面右上のヘッダー領域**に移動します。
- **メリット**:
  - この配置であれば、仮想キーボードが表示されても、ボタンが隠れることは一切なくなります。
  - 「追加」操作のボタンがヘッダーにあるのは一般的で、ユーザーにとって分かりやすいUIパターンです。
  - 実装がシンプルで、実験的なAPIに依存しないため、全てのデバイスで安定して動作します。

## 3. 実装詳細
- **対象ファイル**: `src/app/session/ongoing/page.tsx`
- **実装ステップ**:
  1. 現在、画面右下に`position: fixed`で配置されている「+」ボタンを削除します。
  2. 画面上部の`<header>`要素内に、新しい「+」ボタン（アイコンボタン）を配置します。「終了」ボタンの隣が適切です。
  3. ヘッダーのレイアウトに合わせて、ボタンのスタイルを調整します。