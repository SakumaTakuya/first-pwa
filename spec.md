# 機能仕様: 要求1 - 迅速な記録開始

(省略)

---

# 機能仕様: 要求2 - 簡単な種目追加 (修正版)

(省略)

---

# 機能仕様: 要求3 - 完了した記録の永続化

(省略)

---

# 機能仕様: 要求5 - トレーニング履歴の確認

(省略)

---

# 機能仕様: 要求6 - セット入力UI/UXの改善

(省略)

---

# 機能仕様: 要求7 - 記録済みセットの編集機能

## 1. 概要
一度記録したセット（重量・回数）を、後から修正できる機能を追加する。UIは、モーダルを開かずにその場で編集できる「インライン編集」方式を採用し、迅速な操作性を維持する。

## 2. 設計方針
- **UI**: 編集対象のセットの表示が、入力フォームにその場で切り替わるインライン編集方式を実装する。
- **状態管理**:
  - `session-store` (Zustand) に、特定のセットを更新するための`updateSet`メソッドを追加する。
  - `ExerciseCard`コンポーネント内に、現在編集中のセットを管理するためのローカル状態を追加する。

## 3. 実装詳細

### Step 1: `session-store.ts`への更新機能追加
- `updateSet(sessionExerciseId: string, setId: string, newWeight: number, newReps: number)`というシグネチャのメソッドをストアに追加する。
- このメソッドは、指定された`sessionExerciseId`と`setId`に一致するセットを見つけ、その`weight`と`reps`を新しい値で更新する。

### Step 2: `ExerciseCard.tsx`のUIとロジックの修正
- **UIの変更**:
  - セット一覧の先頭に表示されているセット番号 (`{index + 1}`) を、`lucide-react`の編集アイコン（`<Pencil />`）を使用したボタンに置き換える。
- **状態の追加**:
  - `const [editingSet, setEditingSet] = useState<Set | null>(null);` のようなローカル状態を`ExerciseCard`コンポーネントに追加し、編集中のセット情報を保持する。
- **条件付きレンダリング**:
  - セット一覧を`map`で描画する際に、各セットが編集中かどうかを判定する。
  - **編集中でない場合**: 従来通り、`<span>`タグで重量と回数を表示し、隣に「編集」アイコンボタンを配置する。
  - **編集中である場合**: `<span>`の代わりに`<input>`要素を描画し、現在のセットの値が入力された状態にする。また、「保存」ボタンと「キャンセル」ボタンを表示する。
- **イベントハンドラの実装**:
  - **編集ボタン `onClick`**: `setEditingSet(set)`を呼び出し、クリックされたセットを編集モードにする。
  - **保存ボタン `onClick`**: `session-store`の`updateSet`メソッドを呼び出してデータを更新し、その後`setEditingSet(null)`を呼び出して表示モードに戻す。
  - **キャンセルボタン `onClick`**: `setEditingSet(null)`を呼び出して表示モードに戻す。