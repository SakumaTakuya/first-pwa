# Project coding standards

今 next.js のプロジェクトで TypeScript を使用しているため、以下のコーディング規約に従ってください。

## 1. ファイル名
- ファイル名は小文字で、単語の区切りはハイフン（-）を使用してください。
- 例: `my-component.tsx`, `user-profile.ts`

## 2. インポート順序
- インポートは以下の順序で行ってください。
  1. 外部ライブラリ
  2. 内部モジュール
  3. スタイルシート
- 各セクションの間には空行を入れてください。

## 3. コードスタイル
- インデントはスペース2つを使用してください。
- セミコロンは必ず使用してください。
- 文字列はシングルクォート（'）を使用してください。
- 変数名はキャメルケースを使用してください。
- 定数名は全て大文字で、単語の区切りはアンダースコア（_）を使用してください。
- コメントは必要な箇所に適宜追加してください。

## 4. TypeScriptの型定義
- 変数や関数の引数、戻り値には必ず型を定義してください。
- インターフェースや型エイリアスを使用して、複雑な型を定義してください。

## 5. 関数の定義
- 関数はアロー関数を使用してください。
- 関数名は動詞から始めるようにしてください。
- 例: `const fetchData = async () => { ... }`

## 6. コンポーネントの定義
- Reactコンポーネントは関数コンポーネントを使用してください。
- コンポーネント名は大文字で始め、キャメルケースを使用してください。
- 例: `const MyComponent: React.FC<Props> = ({ prop }) => { ... }`

## 7. エラーハンドリング
- エラー処理は必ず行ってください。
- `try-catch`ブロックを使用して、非同期処理のエラーを適切にハンドリングしてください。

## 8. テスト
- ユニットテストは必ず作成してください。
- Jestを使用してテストを記述してください。
- テストファイルは対応するファイルと同じディレクトリに、拡張子を`.test.ts`または`.test.tsx`としてください。

## 9. ESLintとPrettierの設定
- ESLintとPrettierを使用してコードのフォーマットと静的解析を行ってください。
- `.eslintrc.js`と`.prettierrc`ファイルをプロジェクトルートに配置してください。

## 10. その他
- 不要なコードやコメントアウトは残さないでください。
- コードの可読性を重視し、適宜リファクタリングを行ってください。
- プロジェクトのルールに従って、コードレビューを行ってください。
- コード修正後は、コミットやレビュー依頼の前に、必ず`npm run lint`を実行し、静的解析エラーがないことを自己確認してください。

## 12. Next.js App Routerの使用
- Next.jsのApp Routerを使用して、ページやAPIルートを定義してください。
- ページコンポーネントは`app`ディレクトリ内に配置し、ファイル名はページのパスに対応させてください。
- APIルートは`app/api`ディレクトリ内に配置し、ファイル名はエンドポイントに対応させてください。
- 例: `app/users/page.tsx`（ユーザーページ）、`app/api/users/route.ts`（ユーザーAPIルート）

# 14. 主要パッケージ
以下の主要なパッケージを使用してください。
- `next`: Next.jsフレームワーク
- `react`: Reactライブラリ
- `typescript`: TypeScript
- `zustand`: 状態管理ライブラリ

# 15.デザインガイドライン

## デザインの基本原則

-   **クラリティ（明瞭性）**: ユーザーはトレーニングに集中しています。情報は瞬時に理解でき、次に何をすべきか明確でなければなりません。
-   **ミニマリズム**: 集中を妨げる不要な装飾は排除します。機能的でクリーンなデザインを心がけます。
-   **モチベーション**: 色使いやフィードバックで、ユーザーの達成感を演出し、トレーニング継続の意欲を刺激します。

---

## 配色ルール (Color Palette)

ダークモードでは、純粋な黒（`#000000`）を避け、深度のあるダークグレーを基調とします。これにより、目の負担を軽減し、奥行きのあるUIを表現します。
`tailwind.config.js`にこれらのカラーパレットを定義して使用してください。

| 用途 | 色名 (Tailwindキー) | HEXコード | 説明 |
| :--- | :--- | :--- | :--- |
| **プライマリ** | `primary` | `#3B82F6` | アプリのテーマカラー。ボタンやアクティブな要素に使用。ダーク背景で際立つ、鮮やかさを保った青。 |
| **アクセント** | `accent` | `#34D399` | 達成・完了を示す色。セット完了のチェックマークや成功通知に使用する、視認性の高い緑。 |
| **背景 (奥)** | `background` | `#0F172A` | アプリケーション全体の最も深い背景色。コンテンツを引き立てるダークネイビー。 |
| **背景 (手前)** | `surface` | `#1E293B` | カードやモーダルなど、一段手前の要素の背景。`background`より一段階明るい。 |
| **メインテキスト** | `text-main` | `#E2E8F0` | 見出しや主要なテキスト。純粋な白を避け、目に優しいオフホワイト。 |
| **サブテキスト** | `text-sub` | `#94A3B8` | 補助的な情報やプレースホルダーに使用。十分な可読性を保ったライトグレー。 |
| **ボーダー** | `border` | `#334155` | コンポーネントの境界線。`surface`に溶け込みすぎず、主張しすぎない色。 |
| **エラー/危険** | `destructive` | `#F87171` | 削除ボタンやエラーメッセージに使用。ダーク背景でも警告として認識しやすい明るめの赤。 |

## 余白とレイアウト (Spacing & Layout)

レイアウトの一貫性を保つため、余白は **4pxの倍数** を基準とします。
Tailwind CSS のデフォルトのスペーシングスケール (`p-2`, `m-4`など) をそのまま利用してください。これにより、`p-1`=4px, `p-2`=8px, `p-4`=16px となり、自然とルールが守られます。

-   **原則**: `margin`や`padding`に`style="padding: 10px"`のような任意の固定値を設定することは**禁止**します。必ずTailwindのユーティリティクラスを使用してください。

### 具体的な使用例

-   **ページ全体の左右パディング**: `px-6` (24px)
    -   スマートフォンの画面幅でもコンテンツが端に寄らないように、十分な余白を確保します。
-   **カードやセクション間の垂直マージン**: `mb-6` (24px)
    -   各コンテンツブロックが明確に分離され、視覚的に整理されている印象を与えます。
-   **カード内のパディング**: `p-6` (24px)
    -   カード内のコンテンツに十分な呼吸スペースを与え、窮屈さをなくします。
-   **リスト要素間のマージン**: `space-y-4` (16px)
    -   関連する項目（例：セット、種目リスト）をグループ化しつつ、個々の要素を識別しやすくします。
-   **テキストとアイコン、ボタン間の水平マージン**: `space-x-3` (12px) or `space-x-4` (16px)
    -   要素同士が近すぎず、遠すぎない、心地よい距離感を保ちます。
-   **小さな要素（タグなど）のパディング**: `px-3 py-2` (12px, 8px)
    -   要素のサイズに応じた適切な余白を設定します。

## タイポグラフィ (Typography)

フォントは可読性を最優先します。

-   **フォントファミリー**:
    -   日本語: `Noto Sans JP`
    -   英数字: `Inter`
    -   `layout.tsx`でWebフォントを読み込み、`tailwind.config.js`の`fontFamily`に設定します。
-   **フォントサイズ階層**:

| 用途 | 推奨クラス | サイズ (rem/px) | 説明 |
| :--- | :--- | :--- | :--- |
| 画面タイトル | `text-2xl` / `font-bold` | 1.5rem / 24px | `<h1>`相当。各ページの主要な見出し。 |
| セクション見出し | `text-xl` / `font-bold` | 1.25rem / 20px | `<h2>`相当。カードのタイトルなど。 |
| 本文（大） | `text-lg` / `font-medium` | 1.125rem / 18px | 強調したいテキスト。 |
| 本文（標準） | `text-base` / `font-normal` | 1rem / 16px | `<p>`相当。アプリ内の標準テキスト。 |
| 補助テキスト | `text-sm` / `font-normal` | 0.875rem / 14px | 注意書きや補足情報。 |
| キャプション | `text-xs` / `font-normal` | 0.75rem / 12px | さらに細かい注釈。 |

## コンポーネントの基本デザイン

### ボタン (Button)
-   **角丸**: `rounded-lg` (8px) を基本とします。円形のアイコンボタンは`rounded-full`を使用します。
-   **パディング**: `py-2 px-4` を基本とし、押しやすいサイズを確保します。アイコンボタンは`p-3`などを利用します。
-   **状態**: `hover`, `active`, `disabled` の各状態で視覚的なフィードバック（色の変化など）を必ず実装します。`disabled`時は透明度 (`opacity-50`) を下げ、カーソルを `cursor-not-allowed` にします。

### カード (Card)
-   **角丸**: `rounded-xl` (12px) を基本とします。
-   **背景色**: `bg-surface`
-   **影**: `shadow-md` を使用し、背景から少し浮いているように見せます。
-   **パディング**: `p-4` (16px) または `p-6` (24px) を基本とします。

### 入力フィールド (Input)
-   **角丸**: `rounded-lg` (8px)
-   **背景色**: `bg-surface` または透明感を出す場合は `glass-input` スタイルを適用します。
-   **ボーダー**: `border-border`。`focus`時には `focus:ring-2 focus:ring-primary` のようにリングを表示し、フォーカス状態を明確にします。


## 特殊効果とアニメーション

### Glassmorphism（ガラス効果）
UIに奥行きとモダンな雰囲気を与えるため、カードやナビゲーションにガラス効果を適用します。

-   **基本スタイル (`island-card`)**:
    -   `backdrop-filter`: `blur(20px) saturate(180%)`
    -   `background`: `linear-gradient(135deg, rgba(30, 41, 59, 0.7), rgba(30, 41, 59, 0.4))`
    -   `border`: `1px solid #334155`
-   **ホバー効果**: `transform: translateY(-2px)` と `box-shadow` の変化で浮き上がるようなフィードバックを与えます。
-   **対象コンポーネント**: `island-card`, `glass-header`, `glass-nav`, `glass-modal` など、用途に応じて透明度やぼかしの強度を調整します。

### アニメーション (Animation)
ユーザーのアクションに対するフィードバックや画面遷移を滑らかに見せるために、アニメーションを導入します。

-   **フェードイン (`fade-in`)**: 要素が下から少し上がりながら表示される効果。ページの読み込み時などに使用します。
-   **スライドアップ (`slide-up`)**: モーダルなどが画面下からスライドして表示される効果。
-   **背景アニメーション (`animated-bg`)**: 背景の装飾要素がゆっくりと動く効果。
-   **原則**: アニメーションは `0.3s` 程度の短い時間で完了させ、ユーザーの操作を妨げないようにします。

## アイコンの使用ルール

-   **ライブラリ**: **Lucide Icons** (`lucide-react`) に統一します。他のライブラリの混在は禁止します。（※現在のモックは`Font Awesome`ですが、新規実装では`Lucide`を使用してください）
-   **基本サイズ**: `20px` x `20px` (`h-5 w-5`) を標準とします。ボタン内に配置する場合はテキストサイズに合わせます。
-   **太さ**: `stroke-width="2"` を基本とします。
-   **原則**: アイコン単体で意味が伝わりづらい場合は、必ずテキストラベルを併記します。

### 使用例（モック参考）

| 用途       | アイコン名 (Lucide) | 備考（Font Awesome） |
| :--- | :--- | :--- |
| 追加       | `Plus`, `PlusCircle`| `fa-plus`            |
| 削除       | `Trash2`            | `fa-trash`           |
| 編集       | `Pencil`            | `fa-edit`            |
| 完了・チェック | `Check`, `CheckCircle`| `fa-check`           |
| メニュー   | `MoreVertical`      | `fa-ellipsis-v`      |
| カレンダー | `Calendar`          | `fa-calendar-alt`    |
| 更新       | `RefreshCw`         | `fa-sync-alt`        |
| ユーザー   | `User`              | `fa-user`            |
| 閉じる     | `X`                 | `fa-times`           |
| 履歴       | `History`           | `fa-chart-line`      |
| ダンベル   | `Dumbbell`          | `fa-dumbbell`        |

## UIコンポーネント (`src/components/ui`)

プロジェクトのUIの一貫性と再利用性を高めるため、汎用的なUIコンポーネントを`src/components/ui`に集約しています。新しいUIを実装する際は、まずこれらのコンポーネントが利用できないか検討してください。

### `Button`

標準的なボタンです。`cva`を用いて、見た目やサイズのバリエーションを管理しています。

**使用例:**
```tsx
import { Button } from '@/components/ui/button';

<Button variant="primary" size="lg">クリック</Button>
```

**Props:**
- `variant`: `default`, `destructive`, `outline`, `secondary`, `ghost`, `link`, `fab`
- `size`: `default`, `sm`, `lg`, `icon`, `fab`
- その他、標準の`<button>`要素が受け取る全ての属性。

### `Input`

標準的な入力フィールドです。

**使用例:**
```tsx
import { Input } from '@/components/ui/input';

<Input type="email" placeholder="メールアドレス" />
```

### `Card`

カード型のレイアウトコンポーネントです。`CardHeader`, `CardContent`, `CardFooter`などの子コンポーネントと組み合わせて使用します。

**使用例:**
```tsx
import { Card, CardHeader, CardTitle, CardContent, CardFooter } from '@/components/ui/card';

<Card>
  <CardHeader>
    <CardTitle>カードタイトル</CardTitle>
  </CardHeader>
  <CardContent>
    <p>カードのコンテンツ</p>
  </CardContent>
</Card>
```

### `Dialog`

モーダルダイアログを表示するためのコンポーネントです。`@radix-ui/react-dialog`をベースにしており、アクセシビリティに配慮されています。

**使用例:**
```tsx
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";

<Dialog>
  <DialogTrigger asChild>
    <Button variant="outline">ダイアログを開く</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>ダイアログのタイトル</DialogTitle>
    </DialogHeader>
    <p>ダイアログのコンテンツ</p>
  </DialogContent>
</Dialog>
```

## コンポーネント開発ガイドライン

1.  **UIコンポーネントの再利用**: 新しい機能を開発する際、ボタン、入力フォーム、カードなどの基本的なUI要素が必要な場合は、まず`src/components/ui`内の共通コンポーネントを利用してください。
2.  **コンポジション（組み合わせ）**: 複雑なコンポーネントは、小さな単機能のコンポーネントを組み合わせて作成します。これにより、各コンポーネントが単一の責任を持つことになり、コードの見通しが良くなります。
3.  **スタイリング**:
    - スタイリングにはTailwind CSSのユーティリティクラスを使用します。
    - コンポーネントに複数の見た目のバリエーションが必要な場合は、`cva` (class-variance-authority) を使用してスタイルを管理してください。

# 16. 静的サイト生成とデプロイ

本プロジェクトは、静的サイトとしてビルドされ、GitHub Pagesにデプロイされるように構成されています。

## 静的サイト生成
- `next.config.ts` に `output: 'export'` を設定しています。
- これにより、`npm run build` を実行すると、サーバーを必要としない静的なHTML、CSS、JavaScriptが `out` ディレクトリに生成されます。

## GitHub Pages へのデプロイ
- デプロイは、`.github/workflows/deploy.yml` に定義されたGitHub Actionsワークフローによって自動化されています。
- `main` ブランチにプッシュされると、ワークフローが自動的にサイトをビルドし、`gh-pages` ブランチにデプロイします。
- GitHub Pagesのサブディレクトリ（例: `/first-pwa/`）で正しく動作するように、`next.config.ts` には `basePath: '/first-pwa'` が設定されています。
